import{r as C,j as e}from"./index-BgJRjf8M.js";import{m as T,i as E,j as z,k as u,l as U,W as k,d as t,n as d,T as p,L as W,o as w,p as I,C as N}from"./App-BghU7kAw.js";const F=T(s=>({userEmail:{padding:s.spacing(2,0,0,5)},passwordValidText:{color:s.palette.success.main},mainTextClass:{marginBottom:s.spacing(2)}}));function q(){const s=F(),[m,{error:g,loading:r}]=E(z`
      mutation register($input: RegisterInput) {
        register(input: $input)
      }
    `),[a,h]=u(""),[i,x]=u(""),y=new Date().getTimezoneOffset(),f=U(),n=!r&&g,[o,j]=C.useState(!1),l=a.match(/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i),c=i.match(/^[a-z0-9]{3,}$/),v=!l||!c||r;async function S(){b().catch(()=>{})}async function b(){await m({variables:{input:{email:a,organization_name:i,timezone_offset:y,flavor:f}}}),j(!0)}return e.jsxs(k,{children:[o?e.jsxs(e.Fragment,{children:[e.jsx(t,{variant:"h6",className:s.mainTextClass,children:"Signed up to Stream Security"}),e.jsx(d,{}),e.jsx(t,{variant:"body1",children:"Signup completed successfully, please check your email for login instructions."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(t,{variant:"h6",className:s.mainTextClass,children:"Sign up"}),e.jsx(d,{})]}),e.jsx("div",{children:e.jsx(t,{variant:"body1",children:"We invite you to explore the complete range of features offered by our product throughout your 14 day trial period. Following this, You have the option to choose one of our plans or opt out."})}),e.jsx(p,{label:"Email",type:"text",fullWidth:!0,variant:"outlined",...h,required:!0,error:!l&&a.length>6}),e.jsx(p,{label:"Organization name",type:"text",fullWidth:!0,variant:"outlined",InputProps:{endAdornment:e.jsx(t,{color:"textSecondary",children:".streamsec.io"})},...x,required:!0,...!c&&i.length>2&&{error:!0,helperText:"Minimum 3 lowercase letters/numbers"}})]}),!o&&e.jsxs(W,{gap:1,children:[e.jsxs(t,{display:"inline",variant:"textSecondary",children:["By signing up, you agree to the"," ",e.jsx(w,{target:"_blank",href:"https://stream.security/trial-agreement",color:"primary",children:"Trial agreement"})]}),e.jsx(I,{startIcon:r&&e.jsx(N,{size:20}),variant:"contained",size:"large",color:"primary",fullWidth:!0,onClick:S,disabled:v,children:"Sign Up"})]}),n&&e.jsx(t,{color:"error",children:n.message})]})}export{q as default};
